<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="600" height="500" viewBox="-0.5 -0.5 600 500">
  <defs/>
  <g>
    <!-- Data Sources Box -->
    <rect x="20" y="20" width="160" height="120" rx="8" ry="8" fill="#e3f2fd" stroke="#1976d2" stroke-width="2"/>
    <text x="100" y="45" text-anchor="middle" font-family="Arial" font-size="14" font-weight="bold" fill="#1976d2">Data Sources</text>
    <rect x="40" y="60" width="120" height="24" rx="4" ry="4" fill="#bbdefb" stroke="#1976d2"/>
    <text x="100" y="77" text-anchor="middle" font-family="Arial" font-size="12" fill="#333">Simulator</text>
    <rect x="40" y="90" width="120" height="24" rx="4" ry="4" fill="#bbdefb" stroke="#1976d2"/>
    <text x="100" y="107" text-anchor="middle" font-family="Arial" font-size="12" fill="#333">Database</text>

    <!-- Statistical Models Box -->
    <rect x="220" y="20" width="160" height="120" rx="8" ry="8" fill="#f3e5f5" stroke="#7b1fa2" stroke-width="2"/>
    <text x="300" y="45" text-anchor="middle" font-family="Arial" font-size="14" font-weight="bold" fill="#7b1fa2">Statistical Models</text>
    <rect x="240" y="60" width="120" height="24" rx="4" ry="4" fill="#e1bee7" stroke="#7b1fa2"/>
    <text x="300" y="77" text-anchor="middle" font-family="Arial" font-size="11" fill="#333">InterruptedTimeSeries</text>
    <rect x="240" y="90" width="120" height="24" rx="4" ry="4" fill="#e1bee7" stroke="#7b1fa2"/>
    <text x="300" y="107" text-anchor="middle" font-family="Arial" font-size="11" fill="#333">MetricsApproximation</text>

    <!-- Impact Engine Box -->
    <rect x="120" y="200" width="360" height="140" rx="8" ry="8" fill="#e8f5e9" stroke="#388e3c" stroke-width="2"/>
    <text x="300" y="225" text-anchor="middle" font-family="Arial" font-size="14" font-weight="bold" fill="#388e3c">Impact Engine</text>
    <rect x="140" y="245" width="100" height="30" rx="4" ry="4" fill="#c8e6c9" stroke="#388e3c"/>
    <text x="190" y="265" text-anchor="middle" font-family="Arial" font-size="12" fill="#333">Metrics Layer</text>
    <rect x="250" y="245" width="100" height="30" rx="4" ry="4" fill="#c8e6c9" stroke="#388e3c"/>
    <text x="300" y="265" text-anchor="middle" font-family="Arial" font-size="12" fill="#333">Engine</text>
    <rect x="360" y="245" width="100" height="30" rx="4" ry="4" fill="#c8e6c9" stroke="#388e3c"/>
    <text x="410" y="265" text-anchor="middle" font-family="Arial" font-size="12" fill="#333">Models Layer</text>
    <rect x="250" y="290" width="100" height="30" rx="4" ry="4" fill="#c8e6c9" stroke="#388e3c"/>
    <text x="300" y="310" text-anchor="middle" font-family="Arial" font-size="12" fill="#333">Storage Layer</text>

    <!-- Storage Layer Box -->
    <rect x="420" y="20" width="160" height="120" rx="8" ry="8" fill="#fff3e0" stroke="#f57c00" stroke-width="2"/>
    <text x="500" y="45" text-anchor="middle" font-family="Arial" font-size="14" font-weight="bold" fill="#f57c00">Storage Layer</text>
    <rect x="440" y="60" width="120" height="24" rx="4" ry="4" fill="#ffe0b2" stroke="#f57c00"/>
    <text x="500" y="77" text-anchor="middle" font-family="Arial" font-size="12" fill="#333">Local</text>
    <rect x="440" y="90" width="120" height="24" rx="4" ry="4" fill="#ffe0b2" stroke="#f57c00"/>
    <text x="500" y="107" text-anchor="middle" font-family="Arial" font-size="12" fill="#333">S3</text>

    <!-- Arrows -->
    <defs>
      <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
        <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
      </marker>
    </defs>
    <!-- Data Sources to Metrics Layer -->
    <path d="M 100 140 L 100 180 L 190 180 L 190 245" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
    <!-- Statistical Models to Models Layer -->
    <path d="M 300 140 L 300 180 L 410 180 L 410 245" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
    <!-- Storage Layer to Engine Storage -->
    <path d="M 500 140 L 500 180 L 300 180 L 300 290" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  </g>
</svg>
